<ng-container *ngIf="!loading$ || !(loading$ | async); else loading">
    <ng-container *ngIf="!!user$; else loading">
        <ng-container *ngIf="user$ | async as user; else loading">
            <mat-tab-group [selectedIndex]="tabIndex" (selectedIndexChange)="changeIndex($event)">
                <mat-tab label="Edit Info">
                    <app-user-form
                        [data]="user"
                        [title]="formTitle"
                        (submitted)="onSubmit($event)"
                    ></app-user-form>
                </mat-tab>
                <mat-tab label="Edit Image">
                    <app-user-image-form
                        [data]="user"
                        (submitted)="onFileSubmit($event)"
                    ></app-user-image-form>
                </mat-tab>
            </mat-tab-group>

        </ng-container>
    </ng-container>
</ng-container>

<ng-template #loading>
    <app-loading></app-loading>
</ng-template>
